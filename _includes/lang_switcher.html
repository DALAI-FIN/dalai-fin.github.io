
<div class="lang_switcher">
    {% for lang in site.languages %}
        {% assign lang_name = site.data[lang].l10n.lang_name %}
        {% if lang == site.active_lang %}
            {{ lang_name }}
        {% else %}
            {% if page.name contains "index" %}
                {% if lang == site.default_lang %}
                    <a href="{{ site.baseurl }}">{{ lang_name }}</a>
                {% else %}
                    <a href="{{ site.baseurl | append: lang }}">{{ lang_name }}</a>
                {% endif %}
            {% else %}
                {% if lang == site.default_lang %}
                    <a href="{{ site.baseurl | append: page.handle }}">{{ lang_name }}</a>
                {% else %}
                    <a href="{{ site.baseurl | append: lang | append: page.handle }}">{{ lang_name }}</a>
                {% endif %}
            {% endif %}
            
        {% endif %}
    {% endfor %}
</div>